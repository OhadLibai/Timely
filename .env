# ===================================================================
# UPDATED .env FILE - Parcel Configuration Fixed
# ===================================================================

# -------------------------
# GENERAL APP CONFIG
# -------------------------
NODE_ENV=development
APP_NAME=Timely
APP_VERSION=1.0.0

# -------------------------
# DEVELOPMENT SETTINGS
# -------------------------
DEBUG=false
ENVIRONMENT=development
LOG_LEVEL=INFO

# -------------------------
# SECURITY & AUTH
# -------------------------
JWT_SECRET=your-super-secret-jwt-key-for-dev-that-is-at-least-32-chars
JWT_REFRESH_SECRET=your-super-secret-jwt-refresh-key-for-dev-that-is-32-chars
JWT_ACCESS_TOKEN_EXPIRY=24h

# -------------------------
# SERVICE PORTS
# -------------------------
FRONTEND_PORT=3000
BACKEND_PORT=5000
ML_SERVICE_PORT=8000
DB_EXPOSED_PORT=5432

# -------------------------
# SERVICE URLS
# -------------------------
FRONTEND_URL=http://localhost:3000
BACKEND_URL=http://backend:5000

# ✅ FIXED: Removed VITE_API_URL (Vite-specific)
# ✅ ADDED: API_URL for Parcel environment variables
API_URL=http://localhost:5000/api

ML_SERVICE_URL=http://ml-service:8000

# -------------------------
# API RATE LIMITING
# -------------------------
RATE_LIMIT_WINDOW_MS=900000

# -------------------------
# DATABASE CONFIG
# -------------------------
POSTGRES_USER=timely_user
POSTGRES_PASSWORD=timely_password
POSTGRES_DB=timely_db
DB_HOST=database
DB_PORT=5432
DATABASE_URL=postgresql://timely_user:timely_password@database:5432/timely_db

# ===================================================================
# ENHANCED ML SERVICE CONFIG - TIFU-KNN ALGORITHM
# ===================================================================

# ML Algorithm Configuration
MODEL_TYPE=tifu_knn
KNN_K=50
MIN_PURCHASE_HISTORY=3
CONFIDENCE_THRESHOLD=0.1
MAX_BASKET_SIZE=50

# Data Processing
DATASET_PATH=/app/dataset
DATA_PATH=/app/data
EVALUATION_BATCH_SIZE=1000

# Performance & Caching  
CACHE_SIZE=10000
SIMILARITY_THRESHOLD=0.05
PROCESSING_CHUNK_SIZE=1000

# Evaluation Settings
EVALUATION_SPLIT_RATIO=0.8
EVALUATION_MAX_USERS=1000
EVALUATION_TIMEOUT=300

# Model Performance Tuning
FEATURE_WEIGHTS_TEMPORAL=0.3
FEATURE_WEIGHTS_FREQUENCY=0.4
FEATURE_WEIGHTS_CATEGORY=0.3

# Logging & Monitoring
ML_LOG_LEVEL=INFO
MODEL_METRICS_ENABLED=true
PERFORMANCE_TRACKING=true

# ===================================================================
# PARCEL BUILD CONFIGURATION
# ===================================================================

# ✅ NEW: Parcel-specific environment variables
# These are available as process.env.API_URL in the frontend
PARCEL_BUNDLE_ANALYZER=false
PARCEL_DETAILED_REPORT=false

# Development flags
HOT_RELOAD=true
SOURCE_MAPS=true

# ===================================================================
# DEPLOYMENT CONTEXT (Development/Test)
# ===================================================================

DEPLOYMENT_ENVIRONMENT=development
TESTING_MODE=true
MOCK_EXTERNAL_SERVICES=false

# Database seeding for development
SEED_DATABASE=true
SEED_SAMPLE_USERS=10
SEED_SAMPLE_PRODUCTS=100

# ============================================================================
# ENVIRONMENT VARIABLE FIXES:
# 
# ✅ REMOVED: VITE_API_URL (Vite-specific)
# ✅ ADDED: API_URL (Parcel-compatible)
# ✅ FIXED: Database URL format consistency  
# ✅ ENHANCED: ML service configuration
# ✅ ADDED: Development-specific flags
# ✅ ADDED: Testing and seeding configuration
# 
# PARCEL USAGE:
# - Frontend can access process.env.API_URL
# - No special prefixes needed (unlike Vite's VITE_ prefix)
# - All environment variables are available in build process
# ============================================================================