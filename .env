# ============================================================================
# TIMELY PROJECT ENVIRONMENT CONFIGURATION
# Development/Test Environment Settings
# ============================================================================

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
POSTGRES_USER=timely_user
POSTGRES_PASSWORD=timely_password
POSTGRES_DB=timely_db
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
DATABASE_URL=postgresql://timely_user:timely_password@localhost:5432/timely_db

# ============================================================================
# JWT SECURITY CONFIGURATION
# ============================================================================
# IMPORTANT: Use strong, unique secrets in production
JWT_SECRET=b8f9c2d4e7a1f3b6d8e2c5a9f1b4d7e0a3c6b9f2e5d8a1c4f7b0e3d6a9c2f5b8e1d4a7c0f3b6
JWT_REFRESH_SECRET=a7c0f3b6d9e2c5a8f1b4d7e0a3c6b9f2e5d8a1c4f7b0e3d6a9c2f5b8e1d4a7c0f3b6d9e2c5a8
JWT_ACCESS_TOKEN_EXPIRY=8h
JWT_REFRESH_TOKEN_EXPIRY=7d

# ============================================================================
# SERVICE URLS (Container Internal Communication)
# ============================================================================
# FIXED: Correct Vite environment variable naming
VITE_API_URL=http://localhost:5000/api

# Backend environment variables
ML_SERVICE_URL=http://ml-service:8000
FRONTEND_URL=http://localhost:3000

# ============================================================================
# APPLICATION CONFIGURATION
# ============================================================================
NODE_ENV=development
PORT=5000

# ML Configuration - Optimized for demo
FEATURE_ENGINEERING=black_box
ARCHITECTURE=direct_database_access
BACKGROUND_JOBS=disabled
AUTO_BASKET_GENERATION=manual

# Demo Settings
DEMO_MODE=enabled
SEED_DEMO_USERS=true
INSTACART_DATA_PATH=/training-data

# ============================================================================
# SECURITY SETTINGS (Dev/Test Optimized)
# ============================================================================
# Rate limiting - Relaxed for development
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=200

# CORS configuration - Allow frontend
CORS_ORIGIN=http://localhost:3000
CORS_CREDENTIALS=true

# Password security
MIN_PASSWORD_LENGTH=6
MAX_LOGIN_ATTEMPTS=5
LOCK_TIME_MINUTES=15
BCRYPT_ROUNDS=10

# ============================================================================
# DATABASE SETTINGS
# ============================================================================
DB_LOGGING=false
DB_SYNC=true
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_POOL_ACQUIRE=30000
DB_POOL_IDLE=10000

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================
LOG_LEVEL=info
LOG_TO_FILE=false
LOG_SQL_QUERIES=false

# ============================================================================
# DEVELOPMENT FEATURES
# ============================================================================
ENABLE_API_DOCS=true
SHOW_STACK_TRACES=true
HOT_RELOAD=true

# ============================================================================
# HEALTH CHECK SETTINGS
# ============================================================================
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3

# ============================================================================
# DOCKER COMPOSE OVERRIDES
# ============================================================================
# Database initialization
INIT_DB_RETRY_ATTEMPTS=5
INIT_DB_RETRY_DELAY=5

# Container resource limits (dev/test)
POSTGRES_MEMORY_LIMIT=256m
BACKEND_MEMORY_LIMIT=512m
FRONTEND_MEMORY_LIMIT=128m
ML_SERVICE_MEMORY_LIMIT=1g

# ============================================================================
# DEMO-SPECIFIC SETTINGS
# ============================================================================
# Instacart dataset configuration
MAX_DEMO_USERS=100
PREDICTION_CACHE_TTL=3600
EVALUATION_TIMEOUT=300

# UI Demo settings
DEMO_ANIMATION_SPEED=normal
SHOW_PERFORMANCE_METRICS=true
ENABLE_PREDICTION_EXPLANATIONS=true

# ============================================================================
# PRODUCTION OVERRIDE EXAMPLES
# ============================================================================
# Uncomment and modify for production deployment:
#
# NODE_ENV=production
# JWT_ACCESS_TOKEN_EXPIRY=15m
# JWT_SECRET=generate-new-strong-secret-64-chars-minimum-for-production-use
# JWT_REFRESH_SECRET=generate-new-strong-refresh-secret-64-chars-minimum
# LOG_LEVEL=warn
# SHOW_STACK_TRACES=false
# BCRYPT_ROUNDS=14
# RATE_LIMIT_MAX_REQUESTS=50
# CORS_ORIGIN=https://yourdomain.com
# DATABASE_URL=postgresql://user:password@prod-host:5432/prod_db
# ML_SERVICE_URL=https://ml-api.yourdomain.com

# ============================================================================
# SECURITY NOTES FOR PRODUCTION:
# ============================================================================
# 1. Generate new JWT secrets (minimum 64 characters)
# 2. Use environment-specific .env files
# 3. Never commit production secrets to version control
# 4. Consider using AWS Secrets Manager or similar
# 5. Rotate JWT secrets regularly
# 6. Use HTTPS in production (enable SSL/TLS)
# 7. Configure proper firewall rules
# 8. Enable database SSL connections
# ============================================================================